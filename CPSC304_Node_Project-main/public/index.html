<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- This meta tag ensures that the website renders correctly across different device sizes, enhancing mobile responsiveness. -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Link to the external CSS stylesheet. Uncomment if you wish to customize or add styling. -->
    <!-- <link rel="stylesheet" href="styles.css">   -->

    <style>
        .primary-key {
            color: red;
            text-decoration: underline;
        }

        .foreign-key {
            color: blue;
            font-weight: bold;
        }
    </style>

    <title>Database Application</title>
</head>
<body>
<!-- ===================================================================================== -->
<!-- Display the current status of the database connection.
     !!HERE TO HELP U DEBUGGING, NOT REQUIRED IN YOUR OWN PROJECT!!
     -->
<h1>Database Connection Status:
    <!-- An in-line placeholder to display connection status. -->
    <span id="dbStatus"> </span>
    <!-- A loading GIF, will be hided once get the status. -->
    <img id="loadingGif" class="loading-gif" src="loading_100px.gif" alt="Loading...">
</h1>

<br><hr><!-- ========================================================================= -->
<div class="container1">
<!-- Show 'Performer'.
Data will be fetched and inserted here dynamically using JavaScript. -->
    <div class="table1">
        <h2>Show Performer</h2>
        <table id="performer_table" border="1">
            <thead>
            <tr>
                <!--Table head, need to be adjusted accordingly to align with your own.-->
                <th class="primary-key">ID</th>
                <th>Name</th>
                <th>Debut Year</th>
                <th>Number of Fans</th>
                <th class="foreign-key">Group ID</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

<!-- Show 'Performer_Group'.
Data will be fetched and inserted here dynamically using JavaScript. -->
    <div class="table2">
        <h2>Show Performer_Group</h2>
        <table id="performer_group_table" border="1">
            <thead>
            <tr>
                <!--Table head, need to be adjusted accordingly to align with your own.-->
                <th class="primary-key">Group ID</th>
                <th>Number of Votes</th>
                <th class="foreign-key">Match ID</th>
                <th class="foreign-key">Song Name</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
<!-- Show 'Match_Date'.
Data will be fetched and inserted here dynamically using JavaScript. -->
    <div class="table3">
        <h2>Show Match_Date</h2>
        <table id="match_date_table" border="1">
            <thead>
            <tr>
                <!--Table head, need to be adjusted accordingly to align with your own.-->
                <th class="primary-key">Match ID</th>
                <th>Match Date</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>
<div class="container2">
<!-- Show 'Song'.
Data will be fetched and inserted here dynamically using JavaScript. -->
<h2>Show Song</h2>
<table id="song_table" border="1">
    <thead>
    <tr>
        <!--Table head, need to be adjusted accordingly to align with your own.-->
        <th class="primary-key">Song Name</th>
        <th>Genre</th>
        <th class="foreign-key">Artist ID</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<!-- Show 'Artist'.
Data will be fetched and inserted here dynamically using JavaScript. -->
<h2>Show Artist</h2>
<table id="artist_table" border="1">
    <thead>
    <tr>
        <!--Table head, need to be adjusted accordingly to align with your own.-->
        <th class="primary-key">Artist ID</th>
        <th>Artist Name</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>
</div>

<br><hr><br> <!-- ========================================================================= -->

<h2>Reset All Tables</h2>
<p>If you wish to reset all tables press on the reset button. If this is the first time you're running this page, you MUST use reset</p>
<button id="resetAll"> reset </button> <br>
<!-- A placeholder to display messages related to the reset operation. -->
<div id="resetAllResultMsg"></div>

<br><hr><br> <!-- ========================================================================= -->

<h2> 2.1.1 Insert Values into Performer Table </h2>
<form id="insertPerformer">
    ID: <input type="number" id="insertPerformerId" placeholder="Enter ID" required> <br><br>
    Name: <input type="text" id="insertPerformerName" placeholder="Enter Name" maxlength="20" required> <br><br>
    Debut Year (Optional): <input type="number" id="insertDebutYear" placeholder="Enter Debut Year"> <br><br>
    Number of Fans (Optional): <input type="number" id="insertNumOfFans" placeholder="Enter Number of Fans"> <br><br>
    Group ID: <input type="number" id="insertGroupId" placeholder="Enter Group ID" required> <br><br>
    <button type="submit"> insert </button> <br>
</form>
<div id="insertPerformerResultMsg"></div>

<h2>Update Performer</h2>
<p>Update the performer name, debut year, number of fans, *and/or* group ID for a performer based on their ID.</p>
<form id="updatePerformer">
    Performer ID: <input type="number" id="performerID" placeholder="Enter Performer ID" required> <br><br>
    Performer Name: <input type="text" id="updatePerformerName" placeholder="Enter Performer Name" maxlength="20"> <br><br>
    Debut Year: <input type="number" id="updateDebutYear" placeholder="Enter Debut Year"> <br><br>
    Number of Fans: <input type="number" id="updateNumFans" placeholder="Enter Number of Fans"> <br><br>
    Group ID: <input type="number" id="updateGroupID" placeholder="Enter Group ID"> <br><br>
    <button type="submit">Update Performer</button> <br>
</form>
<div id="updatePerformerResultMsg"></div>

<h2> 2.1.3 Delete Performer Table </h2>
<form id="deletePerformer">
    delete all samples with conditions:<br>
    his/her/their id is <input type="number" id="deletePerformerID"  placeholder="Enter ID"><br>
    his/her/their name is <input type="text" id="deletePerformerName" placeholder="Enter name"><br>
    his/her/their debut year 
    <select id="debutYearConstraint" name="debutYearConstraint">
        <option value=" "> </option>
        <option value="<">before</option>
        <option value="=">is</option>
        <option value=">">after</option>
    </select>
    <input type="number" id="deletePerformerDebutYear" placeholder="Enter debut year" value="debutYear"><br>
    his/her/their fans is
    <select id="numberFansConstraint" name="numberFansConstraint">
        <option value=" "> </option>
        <option value="<">smaller than</option>
        <option value="=">equal to</option>
        <option value=">">bigger than</option>
    </select>
    <input type="number" id="deletePerformerFans" placeholder="Enter number of fans" value="numberFans"><br>
    his/her/their group id is <input type="number" id="deletePerformerGroup" placeholder="Enter group id"><br>
    <button type="submit"> delete</button> <br>
</form>
<div id="deletePerformerResultMsg"></div>

<h2> 2.1.4 Select Performer </h2>
<form id="selectPerformer">
    <div id="selection-container" class="selection-container">
        <div class="condition-container">
            <select class="attribute-dropdown">
                <option value="performerID">performerID</option>
                <option value="performer_name">performer_name</option>
                <option value="debut_year">debut_year</option>
                <option value="num_fans">num_fans</option>
                <option value="groupID">groupID</option>
            </select>
            <select class="operator-dropdown">
                <option value="=">=</option>
                <option value="!=">!=</option>
                <option value="<"><</option>
                <option value=">">></option>
                <option value="<="><=</option>
                <option value=">=">>=</option>
            </select>
            
            <input type="text" class="value-input" placeholder="Value">

        </div>
    </div>
    <button type="button" onclick="addACondition()">Add A Condition</button>
    <br><br>

    <button type="submit"> select </button> <br>
</form>
<div id="selectPerformerResultMsg"></div>

<h2> 2.1.5 Project Performer</h2>
<form id="projectionPerformer">
    <input type="checkbox" id="ProjectPerformerID" name="performerAttributes" value="performerID">
    <label for="ProjectPerformerID">id of the performer</label><br>
    <input type="checkbox" id="ProjectPerformerName" name="performerAttributes" value="performer_name">
    <label for="ProjectPerformerName">name of the performer</label><br>
    <input type="checkbox" id="ProjectPerformerDebutYear" name="performerAttributes" value="debut_year">
    <label for="ProjectPerformerDebutYear">debut year of the performer</label><br>
    <input type="checkbox" id="ProjectPerformerFans" name="performerAttributes" value="num_fans">
    <label for="ProjectPerformerFans">number of fans of the performer</label><br>
    <input type="checkbox" id="ProjectPerformerGroupID" name="performerAttributes" value="groupID">
    <label for="ProjectPerformerGroupID">group id of the performer</label><br>
    <button type="submit">select columns</button><br>
</form>
<div id="ProjectionPerformerResultMsg"></div>

<h2> 2.1.6 Join Find Song Performed by Group</h2>
<p>Find the song that a performer is performing with their group based on the performer's ID.</p>
<form id="findSongForPerformer">
    Performer ID: <input type="number" id="joinPerformerID" placeholder="Enter Performer ID" required> <br><br>
    <button type="submit">Find Song</button> <br>
</form>
<div id="joinPerformerResultMsg"></div>

<h2>2.1.7 Aggregation with GROUP BY</h2>
<p>In every group, let's find out the min number of fans of performers in that group.</p>
<button id="aggregationGroupby">Show Minimum Number of Fans by Each Group</button> <br><br>
<div id="aggregationGroupbyResultMsg"></div> <br>

<h2>2.1.8 Aggregation with HAVING  Group fan count by minimum number of fans </h2>
<p> Find the total number of fans per group with a minimum number of fans per performer</p>
<form id="performerGroupByFanCount">
    Minimum Fans: <input type="number" id="minFans" placeholder="Enter minimum fans" required> <br><br>
    <button type="submit">Find Fans</button> <br>
</form>
<div id="performerGroupByFanCountResultMsg"></div>

<h2> 2.1.9 Nested aggregation with group by</h2>
<form id="nestedAggregation">
    For each 
    <select id="nestedAggregationGroupBy">
        <option value="debut_year"> debut year </option>
        <option value="groupID"> group </option>
    </select> for which the 
    <select id="nestedAggregationFansGroupSign">
        <option value="MAX"> max </option>
        <option value="MIN"> min </option>
        <option value="avg"> avg </option>
        <option value="SUM"> sum </option>
    </select> of fans of the performers is 
    <select id="nestedAggregationFansGroupConstraint">
        <option value=">"> larger than </option>
        <option value="="> is equal to </option>
        <option value="<"> fewer than </option>
    </select> the 
    <select id="nestedAggregationFansGeneralSign">
        <option value="MAX"> max </option>
        <option value="MIN"> min </option>
        <option value="avg"> avg </option>
        <option value="SUM"> sum </option>
    </select> of the number of fans of all the performers, 
    I would like to know : <br>
    <input type="checkbox" id="nestedAggregationID" name="nestedAggregationCount" value="COUNT(P.performerID)">
    <label for="nestedAggregationID">the number of performers</label><br>
    <input type="checkbox" id="nestedAggregationFans1" name="nestedAggregationCheckboxes" value="num_fans">
    <select id="nestedAggregationFansStat1">
        <option value="max"> max </option>
        <option value="min"> min </option>
        <option value="avg"> avg </option>
        <option value="sum"> sum </option>
    </select> of the number of fans in the group<br>
    <input type="checkbox" id="nestedAggregationFans2" name="nestedAggregationCheckboxes" value="num_fans">
    <select id="nestedAggregationFansStat2">
        <option value="max"> max </option>
        <option value="min"> min </option>
        <option value="avg"> avg </option>
        <option value="sum"> sum </option>
    </select> of the number of fans in the group<br>
    <input type="checkbox" id="nestedAggregationFans3" name="nestedAggregationCheckboxes" value="num_fans">
    <select id="nestedAggregationFansStat3">
        <option value="max"> max </option>
        <option value="min"> min </option>
        <option value="avg"> avg </option>
        <option value="sum"> sum </option>
    </select> of the number of fans in the group<br>
    <input type="checkbox" id="nestedAggregationFans4" name="nestedAggregationCheckboxes" value="num_fans">
    <select id="nestedAggregationFansStat4">
        <option value="max"> max </option>
        <option value="min"> min </option>
        <option value="avg"> avg </option>
        <option value="sum"> sum </option>
    </select> of the number of fans in the group<br>
    <button type="submit"> find out </button><br>
</form>
<div id="nestedAggregationResultMsg"></div>

<h2>2.1.10 Division</h2>
<p>Let's find out the debut years when every group has at least one performer who debuted in that year.</p>
<button id="division">Show Result</button> <br><br>
<div id="divisionResultMsg"></div> <br>

<!-- ===================================================================================== -->
<!-- External JavaScript file that contains the functionality/logic for the operations above. -->
<script src="scripts.js"></script>
</body>
</html>
